<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Memo</title>
    
    
    <meta content="Memo" name="keywords">
    
    <meta content="Memo - Introduction Glow is a machine learning compiler and execution engine for hardware accelerators.(nji It is designed to be used as a backend for high-level machine learning frameworks.
The compiler is designed to allow state of the art compiler optimizations
and code generation of neural network graphs. This library is in active development.
Glow是一個機器學習編譯器，可以用來加速不同硬體平臺上深度學習框架的效能，
同時也能讓硬體開發人員，更專注建構可支援PyTorch等深度學習框架的硬體加速器
所以目的也是為了推廣他們的pytorch
Note: 在PyTorch中，图架构是动态的，这意味着图是在运行时创建的。
而在TensorFlow中，图架构是静态的，这意味着先编译出图然后再运行
Note: PyTorch更适合于在研究中快速进行原型设计、业余爱好者和小型项目，
TensorFlow则更适合大规模的调度，尤其当考虑到跨平台和嵌入式调度操作时
IR Summary 所以是兩階段的IR - High and Low (low是instruction based的,可以用來優化memory相關的操作,還有指令級的排序), 最後才是machine code Glow lowers a traditional neural network dataflow graph into a two-phase strongly-typed intermediate representation (IR)." name="description">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    

    

    

    
    
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>
    

    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/self/css/default.css">
    <script async src="/layui/layui.js"></script>

    <link rel="stylesheet" async href="/self/css/markdown.min.css">
    <link rel="stylesheet" async href="/self/css/gallery.css">
    
    
    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
    <script async src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.0/lazysizes.min.js" integrity="sha256-h2tMEmhemR2IN4wbbdNjj9LaDIjzwk2hralQwfJmBOE=" crossorigin="anonymous"></script></head>

<body>
    
    <header class="layui-header layui-bg-cyan">

    
    
    <a class="nav-self-logo" href="/">
        Memo
    </a>

    <ul class="layui-nav layui-layout-right layui-bg-cyan" lay-filter="">
        
        
        <li class="layui-nav-item" id="nav_big"><a href="/post/">Posts</a></li>
        

        
            
                <li class="layui-nav-item" id="nav_big"><a href="/about/">About</a></li>
            
        

        
        <li class="layui-nav-item" id="nav_small">
            <a href="javascript:;">
                <i class="layui-icon layui-icon-app" style="font-size: 24px;"></i>
            </a>

            <dl class="layui-nav-child">
                
                <dd><a href="/post/">Posts</a></dd>
                

                
                    
                        <dd><a href="/about/">About</a></dd>
                    
                
            </dl>
        </li>
    </ul>
</header>

<script>
layui.use('element', function(){
  var element = layui.element;
});
</script>
        <div id="content" style="min-height:80%">
<div class="layui-container" style="margin-bottom: 10px">
    

    <div class="layui-row layui-col-space10">
        <div class="layui-col-md12 layui-col-sm12 layui-col-xs12">
            <div class="layui-card single-card">
                <br />
                <blockquote class="self-elem-quote self-elem-quote-bg-red markdown-body single-title" >
                    <h1></h1>
                    <h3 style="margin-top:10px; margin-bottom:10px"> 
    <i class="layui-icon layui-icon-date" style="font-size: 28px; vertical-align: -2px;"></i>
    <span>0001-01-01</span>

    
     
    <i class="layui-icon layui-icon-list" style="font-size: 32px; vertical-align: -3px;"></i>
    

    
        <a href="/categories/compiler-framework-glow/">
            <span class="layui-badge layui-bg-orange" style="vertical-align: 2px;">COMPILER-FRAMEWORK-GLOW</span>
        </a>
    

    
    
    
</h3>
                </blockquote>
                <div class="layui-card-body markdown-body single-content">
                    <h1 id="introduction">Introduction</h1>
<p>Glow is a machine learning compiler and execution engine for hardware accelerators.(nji <br>
It is designed to be used as a backend for high-level machine learning frameworks.<br>
The compiler is designed to allow state of the art compiler optimizations<br>
and code generation of neural network graphs.  <br>
This library is in active development.</p>
<p>Glow是一個機器學習編譯器，可以用來加速不同硬體平臺上深度學習框架的效能，<br>
同時也能讓硬體開發人員，更專注建構可支援PyTorch等深度學習框架的硬體加速器<br>
所以目的也是為了推廣他們的pytorch</p>
<p>Note: 在PyTorch中，图架构是动态的，这意味着图是在运行时创建的。<br>
而在TensorFlow中，图架构是静态的，这意味着先编译出图然后再运行<br>
Note: PyTorch更适合于在研究中快速进行原型设计、业余爱好者和小型项目，<br>
TensorFlow则更适合大规模的调度，尤其当考虑到跨平台和嵌入式调度操作时</p>
<h1 id="ir-summary">IR Summary</h1>
<p>所以是兩階段的IR - <br>
High and Low (low是instruction based的,可以用來優化memory相關的操作,還有指令級的排序), 最後才是machine code  <br>
Glow lowers a traditional neural network dataflow graph <br>
into a two-phase strongly-typed intermediate representation (IR).</p>
<p>Glow features a lowering phase which enables<br>
the compiler to support a high number of input operators<br>
as well as a large number of hardware targets <br>
by eliminating the need to implement all operators on all targets.<br>
<strong>The lowering phase is designed to reduce the input space and <br>
allow new hardware backends to focus on a small number <br>
of linear algebra primitives</strong><br>
=&gt; 這邊有提到IR lowering的目的<br>
=&gt; 減少input space<br>
=&gt; 讓硬體的backend 可以聚焦在少個數的linear algebra primitives</p>
<!-- raw HTML omitted -->
<pre><code>        perform memory-related optimizations, such as  
        (1) instruction scheduling, 
        (2) static memory allocation and 
        (3) copy elimination.  
</code></pre>
<!-- raw HTML omitted -->
<p>從下圖可以看到 Low level IR就很像是C/C++ code,會做排code,and memory配置<br>
這樣就代表是從原本的graph轉成 可以執行的program<br>
<img src="Selection_139.png" alt="image"><br>
<img src="Selection_140.png" alt="image"><br>
<img src="Selection_141.png" alt="image"></p>
<h1 id="node-lowering">Node Lowering</h1>
<p>Instead of compiling high-level operators directly, <br>
Glow performs &ldquo;node lowering&rdquo;. <br>
In this phase, the compiler breaks the high-level operator nodes <br>
into low-level linear algebra operator nodes.</p>
<h1 id="low-level-ir">Low-Level IR</h1>
<p>細節在這邊<br>
<a href="https://github.com/pytorch/glow/blob/master/docs/IR.md">https://github.com/pytorch/glow/blob/master/docs/IR.md</a>  <br>
the code is further lowered into the low-level IR in a phase that is called &ldquo;IRGen&rdquo;<br>
(which stands for IR generation)</p>
<p>In the context of hardware acceleration, <br>
<strong>the low-level instruction-based representation</strong> <br>
allows the compiler to represent device-specific operations <br>
such as asynchronous DMA operations. <br>
Hiding the latency of memory operations is important <br>
for utilizing the execution units of the hardware effectively, <br>
and the instruction-based representation allows the compiler to <br>
create a schedule that hides the latency of the memory operations</p>
<p>The IR is not Static Single Assignment (SSA) based representation, <br>
because the IR does not support control flow.<br>
=&gt; GLOW IR不是SSA form,且他也不支援control flow</p>
<p><strong>A function in IR form contains two sections</strong>   <br>
=&gt; 所以low level IR的表示法就是把圖轉成是instruction based<br>
=&gt; 然後會分兩個section&quot;declare變數&rdquo; and &ldquo;program要執行的程序&rdquo; <br>
(1) &lsquo;declare&rsquo;
In the first section of the IR we declare a number of memory regions<br>
that live throughout the lifetime of the program. <br>
This is similar to <strong>global variables in C</strong><br>
=&gt; 所以範例是用model的weight當作例子,不是暫時的memory</p>
<p>(2) &lsquo;program&rsquo;. <br>
The second part of the IR is a list of instructions.<br>
Each variable is annotated with the kind of initialization that the program should do<br>
=&gt; 這邊也可以再插入DMA command,且也可以再對instruction做scheduling</p>
</div>
            </div>
        </div>

        
    </div>
</div>


        </div><footer>
    

    <div class="layui-container">
        <div class="layui-row">
            <div class="layui-col-md4 layui-col-sm6 layui-col-xs6">
                <h3> Related Sites </h3>
            </div>
        </div>
        <div class="layui-row">
            
            <div class="layui-col-md4 layui-col-sm6 layui-col-xs12">
                <a href="/"><p class="footer-url">home</p></a>
            </div>
            
            <div class="layui-col-md4 layui-col-sm6 layui-col-xs12">
                <a href="/about/"><p class="footer-url">About</p></a>
            </div>
            
        </div>
    </div>
    
    
    <div class="layui-container">
        <p class="copyright">&copy; All rights reserved. Powered by <a href='https://gohugo.io' style='color:#FFFFFF'>Hugo</a> and <a href='https://github.com/ertuil/erblog' style='color:#FFFFFF'>Erblog</a>.</p>
    </div>
</footer>
</body>
</html>
